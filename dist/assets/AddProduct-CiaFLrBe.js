import{a,u as P,j as e,Q as l}from"./react-vendor-BNWg92C-.js";import{S as C}from"./vendor-DpNfi1_7.js";import{m as q}from"./index-DGHVRrrZ.js";import{L as D}from"./Layout-DvsYrKGp.js";import"./firebase-vendor-C4yHmXkd.js";const L=()=>{const{addProduct:b}=a.useContext(q),[n,c]=a.useState(""),[o,p]=a.useState(""),[s,m]=a.useState("Pashmina Kani"),[i,g]=a.useState(""),[u,h]=a.useState(""),[x,y]=a.useState(null),w=P(),j=t=>{const r=t.target.files[0];r&&y(r)},v=async t=>{if(t.preventDefault(),!n||!o||!s||!i||!u||!x){l.error("All fields are required!");return}try{const f=await(async N=>{const d=new FormData;return d.append("file",N),d.append("upload_preset","HunarShawls"),(await C.post("https://api.cloudinary.com/v1_1/dokzpyptq/image/upload",d,{headers:{"Content-Type":"multipart/form-data"}})).data.secure_url})(x);if(!f){l.error("Image upload failed. Please try again.");return}const S={title:n,price:o,category:s,quantity:parseInt(i),description:u,imageUrl1:f,time:new Date,date:new Date().toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric"})};await b(S),l.success("Product added successfully!"),c(""),p(""),m("Pashmina Kani"),g(""),h(""),y(null),w("/dashboard")}catch{l.error("Failed to upload image or add product.")}};return e.jsx(D,{children:e.jsx("form",{onSubmit:v,className:"flex justify-center items-center h-screen p-4",children:e.jsxs("div",{className:"bg-gray-800 px-10 py-10 rounded-xl w-full max-w-md",children:[e.jsx("h1",{className:"text-center text-white text-xl mb-4 font-bold",children:"Add Product"}),e.jsx("input",{type:"text",value:n,onChange:t=>c(t.target.value),placeholder:"Product Title",required:!0,className:"bg-gray-600 mb-4 px-2 py-2 w-full rounded-lg text-white placeholder-gray-200 outline-none"}),e.jsx("input",{type:"number",value:o,onChange:t=>p(t.target.value),placeholder:"Price",required:!0,className:"bg-gray-600 mb-4 px-2 py-2 w-full rounded-lg text-white placeholder-gray-200 outline-none"}),e.jsxs("select",{value:s,onChange:t=>m(t.target.value),className:"bg-gray-600 mb-4 px-2 py-2 w-full rounded-lg text-white outline-none",children:[e.jsx("option",{value:"Pashmina Kani",children:"Pashmina Kani"}),e.jsx("option",{value:"Aari",children:"Aari"}),e.jsx("option",{value:"Sozni",children:"Sozni"}),e.jsx("option",{value:"Other",children:"Other"})]}),e.jsx("input",{type:"number",value:i,onChange:t=>g(t.target.value),placeholder:"Quantity",required:!0,className:"bg-gray-600 mb-4 px-2 py-2 w-full rounded-lg text-white placeholder-gray-200 outline-none"}),e.jsx("textarea",{value:u,onChange:t=>h(t.target.value),placeholder:"Description",required:!0,className:"bg-gray-600 mb-4 px-2 py-2 w-full rounded-lg text-white placeholder-gray-200 outline-none"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"imageUpload1",className:"text-white",children:"Upload Image:"}),e.jsx("input",{type:"file",id:"imageUpload1",accept:"image/*",onChange:j,className:"bg-gray-600 mb-4 px-2 py-2 w-full rounded-lg text-white placeholder-gray-200 outline-none"})]}),e.jsx("button",{type:"submit",className:"bg-yellow-500 w-full text-black font-bold px-2 py-2 rounded-lg",children:"Add Product"})]})})})};export{L as default};
