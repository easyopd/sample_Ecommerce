import{r as i,u as k,j as e,L,Q as a}from"./vendor-CMAQCTUK.js";import{m as E,b as g,f as c,g as S}from"./index-Din93sqG.js";import{j as C,q as h,c as b,w as x,d as p,k as D,l as I,s as P,f as q}from"./firebase-vendor-C3qnd6S7.js";import{L as G}from"./Loader-CfgKonKS.js";import{L as W}from"./Layout-oOn3-jb6.js";function O(){const f=i.useContext(E),{loading:w,setLoading:n}=f,[d,j]=i.useState(""),[u,y]=i.useState(""),m=k(),v=async()=>{n(!0);try{const o=(await C(g,d,u)).user,l=h(b(c,"users"),x("uid","==",o.uid)),r=await p(l);if(r.empty)a.error("User not found in Firestore.");else{const t=r.docs[0].data();localStorage.setItem("user",JSON.stringify(t))}a.success("Login successful!"),m("/")}catch(s){console.error("Login Error:",s),a.error("Invalid email or password!")}n(!1)},N=async()=>{n(!0);try{const o=(await D(g,S)).user,l=h(b(c,"users"),x("uid","==",o.uid)),r=await p(l);let t;r.empty?(t={uid:o.uid,name:o.displayName,email:o.email,photoURL:o.photoURL,createdAt:I()},await P(q(c,"users",o.uid),t)):t=r.docs[0].data(),localStorage.setItem("user",JSON.stringify(t)),a.success("Google login successful!"),m("/")}catch(s){console.error("Google Login Error:",s),a.error("Google login failed!")}n(!1)};return e.jsx(W,{children:e.jsxs("div",{className:"flex justify-center items-center h-screen",children:[w&&e.jsx(G,{}),e.jsxs("div",{className:"login_Form bg-gray-800 px-8 py-6 border border-dark-100 rounded-xl shadow-md ${mode === 'dark' ? 'text-white' : 'text-black'}",children:[e.jsx("div",{className:"mb-5",children:e.jsx("h2",{className:"text-center text-2xl font-bold text-white",children:"Login"})}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"email",value:d,onChange:s=>j(s.target.value),className:"bg-black-50 border border-black-200 px-2 py-2 w-96 rounded-md outline-none placeholder-black-200",placeholder:"Email Address"})}),e.jsx("div",{className:"mb-5",children:e.jsx("input",{type:"password",value:u,onChange:s=>y(s.target.value),className:"bg-black-50 border border-black-200 px-2 py-2 w-96 rounded-md outline-none placeholder-black-200",placeholder:"Password"})}),e.jsx("div",{className:"mb-5",children:e.jsx("button",{onClick:v,className:`w-full py-2 font-bold rounded-md transition duration-300 \r
               bg-blue-200 text-black hover:bg-blue-500 hover:text-white focus:outline-none \r
               focus:ring-2 focus:ring-blue-400 focus:ring-opacity-50`,children:"Login"})}),e.jsx("div",{className:"mb-5",children:e.jsx("button",{onClick:N,className:"bg-white hover:bg-white w-full text-white text-center py-2 font-bold rounded-md",children:e.jsx("img",{src:"/images/google.png",alt:"",className:"w-10 h-10 object-cover object-center rounded-full inline-block border-2 border-gray-200 bg-gray-100"})})}),e.jsx("div",{children:e.jsxs("h2",{className:"text-white",children:["Don't have an account?"," ",e.jsx(L,{className:"text-black-500 font-bold",to:"/signup",children:"Signup"})]})})]})]})})}export{O as default};
