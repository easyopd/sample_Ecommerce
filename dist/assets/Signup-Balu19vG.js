import{a as l,u as L,j as e,L as C,Q as r}from"./react-vendor-BNWg92C-.js";import{m as E,b as g,f as p}from"./index-DGHVRrrZ.js";import{G as P,m as D,T as b,s as h,f as x,k as G,n as R}from"./firebase-vendor-C4yHmXkd.js";import{L as A}from"./Loader-CiKQcchp.js";import{L as I}from"./Layout-DvsYrKGp.js";import"./vendor-DpNfi1_7.js";function B(){const[n,f]=l.useState(""),[i,w]=l.useState(""),[c,y]=l.useState(""),j=l.useContext(E),{loading:v,setLoading:t}=j,u=L(),N=new P,S=async()=>{if(t(!0),!n||!i||!c){r.error("All fields are required"),t(!1);return}try{const s=await D(g,i,c),a={uid:s.user.uid,name:n,email:s.user.email,role:"user",time:b.now()};await h(x(p,"users",a.uid),a,{merge:!0}),localStorage.setItem("user",JSON.stringify(a)),r.success("Signup Successful!"),u("/")}catch(s){r.error(s.message||"Signup failed.")}finally{t(!1)}},k=async()=>{t(!0);try{const a=(await G(g,N)).user,d=x(p,"users",a.uid),m=await R(d);let o;m.exists()?o=m.data():(o={uid:a.uid,name:a.displayName,email:a.email,photoURL:a.photoURL||"",role:"user",time:b.now()},await h(d,o)),localStorage.setItem("user",JSON.stringify(o)),r.success("Google Signup Successful!"),u("/")}catch(s){r.error(s.message||"Google Signup failed.")}finally{t(!1)}};return e.jsx(I,{children:e.jsxs("div",{className:"flex justify-center items-center h-screen ",children:[v&&e.jsx(A,{}),e.jsxs("div",{className:"login_Form bg-gray-800 px-8 py-6 border border-black-100 rounded-xl shadow-md",children:[e.jsx("h1",{className:"text-center text-2xl font-bold text-white p-3",children:"Signup"}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"text",value:n,onChange:s=>f(s.target.value),className:"bg-black-50 border border-black-200 px-2 py-2 w-96 rounded-md outline-none placeholder-black-200",placeholder:"Name"})}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"email",value:i,onChange:s=>w(s.target.value),className:"bg-black-50 border border-black-200 px-2 py-2 w-96 rounded-md outline-none placeholder-black-200",placeholder:"Email"})}),e.jsx("div",{className:"mb-5",children:e.jsx("input",{type:"password",value:c,onChange:s=>y(s.target.value),className:"bg-black-50 border border-black-200 px-2 py-2 w-96 rounded-md outline-none placeholder-black-200",placeholder:"Password"})}),e.jsx("div",{className:"mb-5",children:e.jsx("button",{onClick:S,className:`w-full py-2 font-bold rounded-md transition duration-300 \r
               bg-blue-500 text-white hover:bg-blue-600 focus:outline-none \r
               focus:ring-2 focus:ring-blue-400 focus:ring-opacity-50`,children:"Signup"})}),e.jsx("div",{className:"mb-5",children:e.jsx("button",{onClick:k,className:"bg-white hover:bg-white w-full text-white text-center py-2 font-bold rounded-md",children:e.jsx("img",{src:"/images/google.png",alt:"",className:"w-10 h-10 object-cover object-center rounded-full inline-block border-2 border-gray-200 bg-gray-100"})})}),e.jsx("div",{children:e.jsxs("h2",{className:"text-white",children:["Have an account?"," ",e.jsx(C,{className:"text-black-500 font-bold",to:"/login",children:"Login"})]})})]})]})})}export{B as default};
